<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>etcd on 老J的博客</title><link>https://blog.llaoj.cn/tags/etcd/</link><description>Recent content in etcd on 老J的博客</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Mon, 29 Aug 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.llaoj.cn/tags/etcd/index.xml" rel="self" type="application/rss+xml"/><item><title>使用etcdctl查看kubernetes存储的内容</title><link>https://blog.llaoj.cn/posts/2208/kubernetes-etcdctl-usage/</link><pubDate>Mon, 29 Aug 2022 00:00:00 +0000</pubDate><guid>https://blog.llaoj.cn/posts/2208/kubernetes-etcdctl-usage/</guid><description>下面这个脚本提供了etcdctl连接etcd所需要的断点、证书相关的信息, 能快速或许并调用命令查看, 这个脚本需要在master节点上执行:
#!/bin/bash ENDPOINTS=$(ps -ef | grep kube-apiserver | grep -P &amp;#39;etcd-servers=(.*?)\s&amp;#39; -o | awk -F= &amp;#39;{print $2}&amp;#39;) CACERT=$(ps -ef | grep kube-apiserver | grep -P &amp;#39;etcd-cafile=(.*?)\s&amp;#39; -o | awk -F= &amp;#39;{print $2}&amp;#39;) CERT=$(ps -ef | grep kube-apiserver | grep -P &amp;#39;etcd-certfile=(.*?)\s&amp;#39; -o | awk -F= &amp;#39;{print $2}&amp;#39;) KEY=$(ps -ef | grep kube-apiserver | grep -P &amp;#39;etcd-keyfile=(.*?)\s&amp;#39; -o | awk -F= &amp;#39;{print $2}&amp;#39;) alias etcdctl=&amp;#39;ETCDCTL_API=3 etcdctl --endpoints=${ENDPOINTS} --cacert=${CACERT} --key=${KEY} --cert=${CERT} -w=json&amp;#39; 好了下面可以直接使用etcdctl命令了, 比如:</description></item></channel></rss>